# flask-rich

Set the Python version with `$ pyenv local 3.6.7`  

Describe the features here

## One time setup
* Install **pipenv** if is not installed yet `$ pip install --user pipenv`  
* Make sure it is in the `PATH`: `$ export PATH="~/.local/bin:$PATH"`
* ~~Flask-RESTPlus is an extension of Flask that helps create REST APIs. `$ pipenv install flask-restplus` it has been evlved to _Flask-RESTX_ but for this tutorial, I'm sticking to _Flask-RESTPlus_.~~
* Flask-Marshmallow is another extension of Flask. It is useful to add HATEOAS support. `$ pipenv install flask-marshmallow`

## Usual workflow
* Activate the environment with `$ pipenv shell`
* `$ source venv/bin/activate`
* Create the db if needed 

```
>>> from app import db
>>> db.create_all()
```

* Run the app with `(flask-rich) (user@host flask-rich)$ python app.py`


Here are some examples to interact with the API. For the full documentation, refer to the [documentation generated by Swagger here]().

```
# List the kids
$ curl -X GET http://127.0.0.1:5000/kids/

# Create a kid
$ curl -X POST  -H 'Content-Type: application/json'  http://127.0.0.1:5000/kids/ -d '
    {
        "name":"Tom"
    }
    '

# Get a particular kid using the kid_id, 2 in this case
curl -X GET http://127.0.0.1:5000/kids/2

# Delete the kid with kid_id=3
curl -X DELETE http://127.0.0.1:5000/kids/3



```

## Structure



## References
* [Building REST APIs using Flask-RESTPlus, SQLAlchemy & Marshmallow](https://medium.com/analytics-vidhya/building-rest-apis-using-flask-restplus-sqlalchemy-marshmallow-cff76b202bfb) by Suman Das
* [Flask + marshmallow for beautiful APIs] (https://flask-marshmallow.readthedocs.io/en/stable)


## Issues encountered
* _'Marshmallow' object has no attribute 'ModelSchema'_ Fixed with [this SO](https://stackoverflow.com/questions/57984649/marshmallow-object-has-no-attribute-modelschema#61489262) answer.
* `kids` works as expected but `kids/` with a trailing slash doesn't work. Fixed adding `strict_slashes=False` in the route, i.e., `@app.route('/kids', methods=['GET'], strict_slashes=False)`.


# TODO
* ~~JSNOIFY responses~~
* ~~Check why kids are not being created~~
* Generate documentation with Swagger
* Specify versions in Pipfile
* Testing using the Requests library, Postman tests or something else

